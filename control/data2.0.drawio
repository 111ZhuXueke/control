<mxfile host="app.diagrams.net" modified="2022-05-06T06:41:56.457Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.127 Safari/537.36" etag="RfVgVgYvkongSqwmnWnu" version="16.5.3" type="github">
  <diagram id="C5RBs43oDa-KdzZeNtuy" name="Page-1">
    <mxGraphModel dx="1847" dy="616" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-1" parent="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-0" target="9ICDOCjzjDNLYAUlCZeT-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-0" value="开始" style="rounded=1;whiteSpace=wrap;html=1;fontSize=8;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="135" y="210" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-3" target="9ICDOCjzjDNLYAUlCZeT-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-17" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=7;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-3" target="9ICDOCjzjDNLYAUlCZeT-16">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-3" value="是否抢到锁" style="rhombus;whiteSpace=wrap;html=1;rounded=1;fontSize=8;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="130" y="270" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-8" target="9ICDOCjzjDNLYAUlCZeT-11">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-8" value="初始化player对应的csv数量在本地缓存，统筹者内使用" style="whiteSpace=wrap;html=1;rounded=1;fontSize=7;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="112.5" y="390" width="115" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-10" value="是" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=8;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="170" y="350" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-14" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-11" target="9ICDOCjzjDNLYAUlCZeT-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-11" value="定义手动-自动互斥锁，值为播放器的数量。表示定时任务正在执行，此时手动执行组件无法执行" style="whiteSpace=wrap;html=1;rounded=1;fontSize=8;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="75" y="480" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-20" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=7;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-13" target="9ICDOCjzjDNLYAUlCZeT-19">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-13" value="&lt;span style=&quot;font-size: 8px;&quot;&gt;初始化csv对应的player信息在本地缓存，统筹者内使用&lt;/span&gt;" style="whiteSpace=wrap;html=1;rounded=1;fontSize=8;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="110" y="570" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-16" value="结束" style="whiteSpace=wrap;html=1;fontSize=8;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="275" y="290" width="65" height="40" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-18" value="是" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=7;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="220" y="285" width="30" height="10" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-23" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=7;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-19" target="9ICDOCjzjDNLYAUlCZeT-22">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-19" value="获取所有要执行的csv信息，得到一个list" style="whiteSpace=wrap;html=1;fontSize=8;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="110" y="660" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-29" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=7;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-22" target="9ICDOCjzjDNLYAUlCZeT-28">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-22" value="循环该list" style="whiteSpace=wrap;html=1;fontSize=8;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="110" y="750" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-31" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=7;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-28" target="9ICDOCjzjDNLYAUlCZeT-30">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-35" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=7;dashed=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-28" target="9ICDOCjzjDNLYAUlCZeT-34">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-28" value="将list中的每个元素转换为 线程业务类（&lt;span style=&quot;background-color: rgb(255 , 255 , 255) ; font-size: 10.5pt&quot;&gt;OssNfsThread&lt;/span&gt;&lt;span&gt;），并添加到线程池中，后续业务在线程类执行&lt;/span&gt;" style="whiteSpace=wrap;html=1;fontSize=8;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="110" y="850" width="120" height="140" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-30" value="结束" style="whiteSpace=wrap;html=1;fontSize=8;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="132.5" y="1020" width="75" height="40" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-39" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=13;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-34" target="9ICDOCjzjDNLYAUlCZeT-38">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-34" value="&lt;span style=&quot;background-color: rgb(255 , 255 , 255) ; font-size: 10.5pt&quot;&gt;OssNfsThread&lt;br&gt;&lt;/span&gt;&lt;font face=&quot;宋体&quot;&gt;&lt;span style=&quot;font-size: 14px ; background-color: rgb(255 , 255 , 255)&quot;&gt;流程&lt;/span&gt;&lt;/font&gt;开始" style="rounded=1;whiteSpace=wrap;html=1;fontSize=7;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="324" y="890" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-37" value="&lt;span style=&quot;font-size: 14px ; text-align: center ; background-color: rgb(255 , 255 , 255)&quot;&gt;OssNfsThread类说明&lt;/span&gt;&lt;h1&gt;&lt;span style=&quot;font-size: 7px ; font-weight: 400&quot;&gt;该类会根据csv 名称、以及昨日日期自动拼接 csv在oss上的路径，并自动执行相应的组件（下载、压缩、上传、文件删除）。&lt;/span&gt;&lt;/h1&gt;&lt;div&gt;组件的执行状态通过&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;&lt;font style=&quot;font-size: 13px&quot;&gt;csv_process_record表中的status状态体现。&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=1;fontSize=7;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="300" y="770" width="260" height="170" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-41" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;fontSize=5;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-38" target="9ICDOCjzjDNLYAUlCZeT-40">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-96" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=11;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-38" target="9ICDOCjzjDNLYAUlCZeT-40">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-38" value="&lt;span style=&quot;font-size: 5px; background-color: rgb(255, 255, 255);&quot;&gt;获取前一日时间，格式为yyyy-MM-dd&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=5;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="324" y="990" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-43" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=5;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-40" target="9ICDOCjzjDNLYAUlCZeT-42">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-40" value="&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;拼接csv在oss上的路径，同时凭借下载后的csv在nfs上的路径&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=5;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="324" y="1090" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-45" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=5;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-42" target="9ICDOCjzjDNLYAUlCZeT-44">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-42" value="&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;删除nfs上前日的csv压缩数据，如今天是5月6号，则删除5月4号的数据&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=5;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="324" y="1190" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-47" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;fontSize=5;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-44" target="9ICDOCjzjDNLYAUlCZeT-46">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-44" value="&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;执行下载&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=5;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="326" y="1290" width="116" height="40" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-55" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=5;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-46" target="9ICDOCjzjDNLYAUlCZeT-54">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-69" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=5;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-46" target="9ICDOCjzjDNLYAUlCZeT-68">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-46" value="csv是否下载成功" style="rhombus;whiteSpace=wrap;html=1;fontSize=5;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="344" y="1360" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-61" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=5;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-54" target="9ICDOCjzjDNLYAUlCZeT-60">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-64" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=5;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-54" target="9ICDOCjzjDNLYAUlCZeT-63">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-54" value="响应结果是否为文件不存在？" style="rhombus;whiteSpace=wrap;html=1;fontSize=5;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="465" y="1420" width="110" height="100" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-56" value="否" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=5;fontColor=#000000;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="442" y="1410" width="30" height="10" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-59" value="否" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=5;fontColor=#000000;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="570" y="1450" width="30" height="10" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-60" value="更新该记录状态为下载失败。&lt;br&gt;流程结束" style="whiteSpace=wrap;html=1;fontSize=5;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="620" y="1440" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-67" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=5;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-63" target="9ICDOCjzjDNLYAUlCZeT-66">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-63" value="更新该记录为下载成功，并向统筹者（&lt;span style=&quot;font-weight: bold ; background-color: rgb(255 , 255 , 255)&quot;&gt;&lt;font style=&quot;font-size: 11px&quot;&gt;coordinatorProducer&lt;/font&gt;&lt;/span&gt;）发送csv已就绪的信息" style="whiteSpace=wrap;html=1;fontSize=5;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="430" y="1565" width="180" height="110" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-65" value="是" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=5;fontColor=#000000;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="490" y="1530" width="30" height="10" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-66" value="流程结束" style="whiteSpace=wrap;html=1;fontSize=5;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="460" y="1705" width="120" height="45" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-72" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=5;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-68" target="9ICDOCjzjDNLYAUlCZeT-71">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-68" value="更新记录为下载成功，并插入本次下载的csv字节数" style="whiteSpace=wrap;html=1;fontSize=5;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="155" y="1440" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-70" value="是" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=5;fontColor=#000000;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="275" y="1410" width="30" height="10" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-74" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=5;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-71" target="9ICDOCjzjDNLYAUlCZeT-73">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-71" value="执行压缩" style="whiteSpace=wrap;html=1;fontSize=5;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="152.5" y="1530" width="125" height="30" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-76" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=5;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-73" target="9ICDOCjzjDNLYAUlCZeT-75">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-79" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=5;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-73" target="9ICDOCjzjDNLYAUlCZeT-78">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-73" value="是否压缩成功" style="rhombus;whiteSpace=wrap;html=1;fontSize=5;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="162.5" y="1600" width="105" height="90" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-75" value="更新该记录为压缩失败。&lt;br&gt;流程结束" style="whiteSpace=wrap;html=1;fontSize=5;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-30" y="1615" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-77" value="否" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=5;fontColor=#000000;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="115" y="1615" width="30" height="10" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-82" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=5;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-78" target="9ICDOCjzjDNLYAUlCZeT-81">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-78" value="更新该记录为压缩成功" style="whiteSpace=wrap;html=1;fontSize=5;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="155" y="1740" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-80" value="是" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=5;fontColor=#000000;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="225" y="1705" width="30" height="10" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-84" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=5;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-81" target="9ICDOCjzjDNLYAUlCZeT-83">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-81" value="执行文件上传，将压缩的zip上传到oss上" style="whiteSpace=wrap;html=1;fontSize=5;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="151.25" y="1830" width="127.5" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-86" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=5;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-83" target="9ICDOCjzjDNLYAUlCZeT-85">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-89" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=5;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-83" target="9ICDOCjzjDNLYAUlCZeT-88">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-83" value="是否上传成功" style="rhombus;whiteSpace=wrap;html=1;fontSize=5;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="152.5" y="1920" width="125" height="100" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-85" value="更新该记录为上传失败。&lt;br&gt;流程结束" style="whiteSpace=wrap;html=1;fontSize=5;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="-30" y="1940" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-87" value="否&lt;br&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=5;fontColor=#000000;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="115" y="1945" width="30" height="10" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-92" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=5;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-88" target="9ICDOCjzjDNLYAUlCZeT-91">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-95" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;dashed=1;fontSize=11;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-88" target="9ICDOCjzjDNLYAUlCZeT-93">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-88" value="更新该记录为上传成功，并向统筹者（&lt;span style=&quot;font-weight: bold ; background-color: rgb(255 , 255 , 255)&quot;&gt;&lt;font style=&quot;font-size: 11px&quot;&gt;coordinatorProducer&lt;/font&gt;&lt;/span&gt;&lt;span&gt;）发送csv已就绪的信息&lt;/span&gt;" style="whiteSpace=wrap;html=1;fontSize=5;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="127.5" y="2060" width="175" height="90" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-90" value="是" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=5;fontColor=#000000;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="215" y="2035" width="30" height="10" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-91" value="结束" style="whiteSpace=wrap;html=1;fontSize=5;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="157.5" y="2190" width="115" height="40" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-98" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=11;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-93" target="9ICDOCjzjDNLYAUlCZeT-97">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-93" value="&lt;h1 style=&quot;text-align: left&quot;&gt;&lt;span style=&quot;font-size: 5px ; text-align: center ; background-color: rgb(255 , 255 , 255)&quot;&gt;&lt;font style=&quot;font-size: 11px&quot;&gt;CoordinatorProducer&lt;/font&gt;&lt;/span&gt;&lt;/h1&gt;&lt;div&gt;&lt;span style=&quot;font-size: 5px ; text-align: center ; background-color: rgb(255 , 255 , 255)&quot;&gt;&lt;font style=&quot;font-size: 11px&quot;&gt;开始&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=5;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="420" y="2072.5" width="140" height="65" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-94" value="&lt;h1&gt;&lt;span style=&quot;font-size: 5px ; text-align: center ; background-color: rgb(255 , 255 , 255)&quot;&gt;&lt;font style=&quot;font-size: 11px&quot;&gt;CoordinatorProducer（统筹者——生产者）&lt;/font&gt;&lt;/span&gt;&lt;br&gt;&lt;/h1&gt;&lt;p&gt;该生产者在发送消息之前，会将该csv与执行日期，服务前缀进行拼接，放入redis中，消费者需判断该key是否存在，再决定是否执行消费（防止重复消费）&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=1;fontSize=5;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="410" y="1952.5" width="190" height="120" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-100" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=11;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-97" target="9ICDOCjzjDNLYAUlCZeT-99">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-97" value="&lt;h1 style=&quot;text-align: center&quot;&gt;&lt;span style=&quot;font-size: 5px ; font-weight: 400&quot;&gt;将csv与执行日期、服务前缀进行凭借，存入redis中。消费者消费完该消息再将该key从reids中删除，防止重复消费&lt;/span&gt;&lt;/h1&gt;&lt;div&gt;&lt;span style=&quot;font-size: 5px ; font-weight: 400&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=5;fontColor=#000000;fontStyle=0" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="415" y="2177.5" width="150" height="102.5" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-102" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=11;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-99" target="9ICDOCjzjDNLYAUlCZeT-101">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-105" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=11;fontColor=#000000;dashed=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-99" target="9ICDOCjzjDNLYAUlCZeT-103">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-99" value="&lt;h1 style=&quot;text-align: center&quot;&gt;&lt;span style=&quot;font-size: 5px ; font-weight: 400&quot;&gt;消息发送。&lt;/span&gt;&lt;/h1&gt;&lt;div&gt;&lt;span style=&quot;font-size: 5px ; font-weight: 400&quot;&gt;消费者为（&lt;/span&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255) ; font-family: &amp;#34;microsoft yahei ui&amp;#34; ; font-size: 9pt&quot;&gt;CoordinatorConsumers&lt;/span&gt;&lt;span&gt;）&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 5px ; font-weight: 400&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=5;fontColor=#000000;fontStyle=0" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="410" y="2320" width="161.25" height="80" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-101" value="流程结束" style="whiteSpace=wrap;html=1;fontSize=5;fontColor=#000000;rounded=1;fontStyle=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="430.63" y="2430" width="119.38" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-108" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=11;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-103" target="9ICDOCjzjDNLYAUlCZeT-107">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-103" value="&lt;h1 style=&quot;text-align: left&quot;&gt;&lt;span style=&quot;font-family: &amp;#34;microsoft yahei ui&amp;#34; ; font-size: 12px ; font-weight: 400 ; text-align: center ; background-color: rgb(255 , 255 , 255)&quot;&gt;CoordinatorConsumers&lt;/span&gt;&lt;br&gt;&lt;/h1&gt;&lt;div&gt;&lt;span style=&quot;font-size: 5px ; text-align: center ; background-color: rgb(255 , 255 , 255)&quot;&gt;&lt;font style=&quot;font-size: 11px&quot;&gt;开始&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=5;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="667" y="2327.5" width="140" height="65" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-104" value="&lt;span style=&quot;font-family: &amp;#34;microsoft yahei ui&amp;#34; ; font-size: 12px ; text-align: center ; background-color: rgb(255 , 255 , 255)&quot;&gt;CoordinatorConsumers&lt;/span&gt;&lt;h1&gt;&lt;span style=&quot;font-size: 5px ; text-align: center ; background-color: rgb(255 , 255 , 255)&quot;&gt;&lt;font style=&quot;font-size: 11px&quot;&gt;（统筹者—消费者）&lt;/font&gt;&lt;/span&gt;&lt;br&gt;&lt;/h1&gt;&lt;p&gt;收到消息，即便是该csv已经就绪，程序根据csv得到依赖该csv的所有player，并逐个判断该player是否就绪，若该player就绪，则调用该player。&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=1;fontSize=5;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="667" y="2200" width="190" height="120" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-106" value="注：所有服务中都有异常捕获，发生异常时会发送对应的异常邮件，该情况在流程中不做说明。" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=11;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="37.5" y="10" width="500" height="50" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-110" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=11;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-107" target="9ICDOCjzjDNLYAUlCZeT-109">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-107" value="&lt;h1 style=&quot;text-align: center&quot;&gt;&lt;font face=&quot;microsoft yahei ui&quot;&gt;&lt;span style=&quot;font-weight: 400 ; background-color: rgb(255 , 255 , 255)&quot;&gt;消息对象非空校验，若消息为空，则流程结束&lt;/span&gt;&lt;/font&gt;&lt;/h1&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=5;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="667" y="2440" width="140" height="65" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-114" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=11;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-109" target="9ICDOCjzjDNLYAUlCZeT-113">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-109" value="&lt;h1 style=&quot;text-align: center&quot;&gt;&lt;font face=&quot;microsoft yahei ui&quot;&gt;&lt;span style=&quot;font-weight: 400 ; background-color: rgb(255 , 255 , 255)&quot;&gt;解析消息，并初始化消费日志类。无论程序是否执行成功，该操作都会被记录。&lt;/span&gt;&lt;/font&gt;&lt;/h1&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=5;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="667" y="2550" width="140" height="65" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-116" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=11;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-113" target="9ICDOCjzjDNLYAUlCZeT-115">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-113" value="&lt;h1 style=&quot;text-align: center&quot;&gt;&lt;font face=&quot;microsoft yahei ui&quot;&gt;&lt;span style=&quot;font-weight: 400 ; background-color: rgb(255 , 255 , 255)&quot;&gt;根据csv名称、执行日期、服务前缀拼接redis key，作消费重复性校验&lt;/span&gt;&lt;/font&gt;&lt;/h1&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=5;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="667" y="2670" width="140" height="65" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-118" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=11;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-115" target="9ICDOCjzjDNLYAUlCZeT-117">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-121" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=11;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-115" target="9ICDOCjzjDNLYAUlCZeT-120">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-115" value="key是否在redis中存在" style="rhombus;whiteSpace=wrap;html=1;fontSize=5;fontColor=#000000;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="664.75" y="2770" width="144.5" height="100" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-117" value="记录该操作。&lt;br&gt;流程结束" style="whiteSpace=wrap;html=1;fontSize=5;fontColor=#000000;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="901.5" y="2790" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-119" value="否" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=11;fontColor=#000000;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="835" y="2790" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-124" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=11;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-120" target="9ICDOCjzjDNLYAUlCZeT-123">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-120" value="删除该key。&lt;br&gt;并从缓存中获取csv对应的所有player，得到一个list" style="whiteSpace=wrap;html=1;fontSize=5;fontColor=#000000;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="677" y="2910" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-122" value="是" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=11;fontColor=#000000;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="745" y="2880" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-126" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=11;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-123" target="9ICDOCjzjDNLYAUlCZeT-125">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-129" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=11;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-123" target="9ICDOCjzjDNLYAUlCZeT-128">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-123" value="list是否为空" style="rhombus;whiteSpace=wrap;html=1;fontSize=5;fontColor=#000000;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="675.5" y="3013" width="123" height="97" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-125" value="记录该操作。&lt;br&gt;流程结束" style="whiteSpace=wrap;html=1;fontSize=5;fontColor=#000000;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="901.5" y="3031.5" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-127" value="是" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=11;fontColor=#000000;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="815" y="3030" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-132" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=11;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-128" target="9ICDOCjzjDNLYAUlCZeT-131">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-128" value="将list内的所有player在redis中的value值进行原子性的+1" style="whiteSpace=wrap;html=1;fontSize=5;fontColor=#000000;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="677" y="3160" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-130" value="否" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=11;fontColor=#000000;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="745" y="3120" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-136" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=11;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-131" target="9ICDOCjzjDNLYAUlCZeT-135">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-131" value="循环所有player" style="whiteSpace=wrap;html=1;fontSize=5;fontColor=#000000;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="677" y="3250" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-138" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=11;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-135" target="9ICDOCjzjDNLYAUlCZeT-137">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-135" value="从缓存中获取每一个player对应的csv数量，该数量通过sql查询得出" style="whiteSpace=wrap;html=1;fontSize=5;fontColor=#000000;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="677" y="3350" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-140" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=11;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-137" target="9ICDOCjzjDNLYAUlCZeT-139">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-143" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=11;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-137" target="9ICDOCjzjDNLYAUlCZeT-142">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-137" value="player在redis中的value是否等于sql查询出的该player对应的csv数量" style="rhombus;whiteSpace=wrap;html=1;fontSize=5;fontColor=#000000;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="665.5" y="3450" width="143" height="110" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-139" value="continue，继续下一个player的匹配" style="whiteSpace=wrap;html=1;fontSize=5;fontColor=#000000;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="900" y="3475" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-141" value="否" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=11;fontColor=#000000;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="835" y="3480" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-146" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=11;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-142" target="9ICDOCjzjDNLYAUlCZeT-145">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-142" value="从redis中删除该player的key" style="whiteSpace=wrap;html=1;fontSize=5;fontColor=#000000;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="677" y="3600" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-144" value="是" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=11;fontColor=#000000;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="745" y="3570" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-148" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=11;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-145" target="9ICDOCjzjDNLYAUlCZeT-147">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-145" value="拼接播放器所需要的参数" style="whiteSpace=wrap;html=1;fontSize=5;fontColor=#000000;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="677" y="3700" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-150" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=11;fontColor=#000000;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-147" target="9ICDOCjzjDNLYAUlCZeT-149">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-147" value="&lt;font style=&quot;font-size: 12px&quot;&gt;调用播放器。&lt;br&gt;当播放器执行完毕时，&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;PlayerAspectJ会进行感知，并将定时-手动互斥锁中的播放器数量原子性的形式-1，当互斥锁对应的值小于或等于0时，表示定时组件执行完毕，然后从redis中删掉该锁。&lt;/span&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=5;fontColor=#000000;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="619.75" y="3800" width="234.5" height="130" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-149" value="流程结束" style="whiteSpace=wrap;html=1;fontSize=5;fontColor=#000000;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="677" y="3970" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-153" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontSize=12;fontColor=#000000;dashed=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-151" target="9ICDOCjzjDNLYAUlCZeT-147">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-156" value="" style="edgeStyle=orthogonalEdgeStyle;curved=0;rounded=1;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=11;fontColor=#393C56;strokeColor=#000000;fillColor=#F2CC8F;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-151" target="9ICDOCjzjDNLYAUlCZeT-155">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-151" value="&lt;h1 style=&quot;text-align: center&quot;&gt;&lt;font face=&quot;microsoft yahei ui&quot;&gt;&lt;span style=&quot;font-weight: 400 ; background-color: rgb(255 , 255 , 255)&quot;&gt;开始&lt;/span&gt;&lt;/font&gt;&lt;/h1&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=5;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="1000" y="3832.5" width="140" height="65" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-152" value="&lt;pre style=&quot;background-color: rgb(255 , 255 , 255) ; font-size: 10.5pt&quot;&gt;listenerDispatchSectionOver()&lt;/pre&gt;&lt;h1&gt;&lt;span style=&quot;font-size: 5px ; text-align: center ; background-color: rgb(255 , 255 , 255)&quot;&gt;&lt;font style=&quot;font-size: 11px&quot;&gt;（&lt;/font&gt;&lt;/span&gt;WorkerScheduler类下的的定时任务）&lt;br&gt;&lt;/h1&gt;&lt;div&gt;会在每天早上8点时检查 定时-手动互斥锁是否存在，若存在，则发送异常邮件通知响应的研发人员。&amp;nbsp;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=1;fontSize=5;fontColor=#000000;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="1000" y="3700" width="270" height="130" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-154" value="&lt;span style=&quot;background-color: rgb(255 , 255 , 255) ; font-size: 10.5pt&quot;&gt;dispatchSectionScheduled() &lt;br&gt;（&lt;/span&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255) ; font-size: 10.5pt&quot;&gt;WorkerScheduler类下的&lt;/span&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255) ; font-size: 10.5pt&quot;&gt;调度器&lt;/span&gt;&lt;span style=&quot;font-size: 14px ; text-align: center ; background-color: rgb(255 , 255 , 255)&quot;&gt;）&lt;/span&gt;&lt;br&gt;&lt;h1&gt;&lt;span style=&quot;font-size: 7px ; font-weight: 400&quot;&gt;该方法用于定时执行csv的上传、下载、压缩等功能，并负责初始化以及清空缓存，减少系统轮询数据库压力。，&lt;/span&gt;&lt;/h1&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=1;fontSize=7;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="100" y="80" width="260" height="170" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-158" value="" style="edgeStyle=orthogonalEdgeStyle;curved=0;rounded=1;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=11;fontColor=#393C56;strokeColor=#000000;fillColor=#F2CC8F;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-155" target="9ICDOCjzjDNLYAUlCZeT-157">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-163" value="" style="edgeStyle=orthogonalEdgeStyle;curved=0;rounded=1;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=11;fontColor=#393C56;strokeColor=#000000;fillColor=#F2CC8F;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-155" target="9ICDOCjzjDNLYAUlCZeT-162">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-155" value="定时-手动互斥锁是否在redis中存在" style="rhombus;whiteSpace=wrap;html=1;fontSize=5;fontColor=#000000;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="995" y="3950" width="150" height="100" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-161" value="" style="edgeStyle=orthogonalEdgeStyle;curved=0;rounded=1;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=11;fontColor=#393C56;strokeColor=#000000;fillColor=#F2CC8F;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9ICDOCjzjDNLYAUlCZeT-157" target="9ICDOCjzjDNLYAUlCZeT-160">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-157" value="向研发人员发送相关邮件，研发人员可手动处理该key" style="whiteSpace=wrap;html=1;fontSize=5;fontColor=#000000;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="1010" y="4100" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-159" value="是" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=11;fontColor=#393C56;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="1035" y="4060" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-160" value="结束" style="whiteSpace=wrap;html=1;fontSize=5;fontColor=#000000;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="1010" y="4200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-162" value="不做处理。&lt;br&gt;流程结束" style="whiteSpace=wrap;html=1;fontSize=5;fontColor=#000000;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="1240" y="3970" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="9ICDOCjzjDNLYAUlCZeT-164" value="否" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=11;fontColor=#393C56;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="1165" y="3980" width="30" height="20" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
